#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# ğŸ” AuditorÃ­a de Consistencia BD-API-Componentes
echo "ğŸ” Ejecutando auditorÃ­a de consistencia..."
npm run audit:consistency

if [ $? -ne 0 ]; then
  echo "âŒ AuditorÃ­a de consistencia fallÃ³. Commit cancelado."
  echo "ğŸ’¡ Ejecuta 'npm run audit:consistency:html' para ver el reporte detallado"
  exit 1
fi

echo "âœ… AuditorÃ­a de consistencia completada"

# Type checking
echo "ğŸ” Verificando tipos TypeScript..."
npm run type-check

if [ $? -ne 0 ]; then
  echo "âŒ Type checking fallÃ³. Commit cancelado."
  exit 1
fi

echo "âœ… Type checking completado"
echo "ğŸš€ Commit permitido - Todo estÃ¡ consistente"